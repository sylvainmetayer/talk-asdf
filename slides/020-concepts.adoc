[.columns]
=== Plugins

[.column.is-one-fifths]
--
`asdf plugin-add <plugin-name> <optional-repo-url>`

--

[.column.fragment.is-four-fifths]
--
link:https://github.com/asdf-vm/asdf-plugins[https://github.com/asdf-vm/asdf-plugins : +750 plugins]

image::community.png[width=500,alt="ASDF community plugin"]

link:https://sops.talks.sylvain.dev[Instant Pub ğŸ—ï¸]
--

[.notes]
****
Permet l'installation d'un plugin pour gÃ©rer les versions d'un outil.

Plugin Shortname Index

https://asdf-vm.com/plugins/create.html#plugin-shortname-index
****

[.transparency]
=== .tool-versions

image::devoxx/DevoxxFR2024_0058.jpg[background, size=cover]


[source,shell]
----
$ cat .tool-versions
go 1.16.15
----

[.notes]
****
- DÃ©finit les versions souhaitÃ©es d'un ou plusieurs outil(s).
- On peut/doit commit ce fichier au mÃªme titre que le gitignore
- C'est TOOL VERSIONSSSSSSSSSSSSSSS
****

[.transparency]
=== Installation d'une version

image::devoxx/DevoxxFR2024_0035.jpg[background, size=cover]

[source,shell]
----
asdf install <plugin> <version>
asdf install go 1.16.15
asdf install
----

=== Local vs Global

// image::devoxx/DevoxxFR2024_0048.jpg[background, size=cover]

[source,text]
----
~/
â”œâ”€â”€ code/
â”‚   â”œâ”€â”€ go1.16/
â”‚   â”‚   â””â”€â”€ .tool-versions
â”‚   â””â”€â”€ go1.22/
â”‚       â””â”€â”€ .tool-versions
â”œâ”€â”€ .tool-versions
----

[source,bash]
----
$ asdf global <outil> <version>
$ asdf local <outil> <version>
----


=== Shims

[source,bash]
----
$ ls ~/.asdf/shims/
go                      gofmt

$ cat ~/.asdf/shims/go
#!/usr/bin/env bash
exec /home/s.metayer/.asdf/bin/asdf exec "go" "$@"

$ ls ~/.asdf/installs/golang/1.16.15/bin -al
go
gofmt

----

[.notes]
****
Le dossier ~/.asdf/shims contient les binaires des versions actuelles.
Ces scripts sont des wrappers qui permettent de dÃ©terminer dynamiquement (selon le dossier ~/.tool-versions...) la version Ã  utiliser.
Ensuite, le binaire est appelÃ© depuis le dossier ~/.asdf/install/<tool>/<version>/bin/<bin>
C'est SHIIIIIIIIIIIIMS pas shym
****

[.transparency]
=== Mise Ã  jour d'asdf

image::devoxx/DevoxxFR2024_0030.jpg[background, size=cover]

[source,bash]
----
asdf update
----

[.notes]
****
- Met Ã  jour vers la derniÃ¨re version stable d'asdf (derniÃ¨re version tag)
- Permet d'avoir accÃ¨s au bugfix / nouvelles fonctionnalitÃ©s /...
****
