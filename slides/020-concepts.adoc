=== Plugins

[source,shell]
----
asdf plugin-add <plugin-name> <optional-repo-url>
----

[.fragment]
--
https://github.com/asdf-vm/asdf-plugins

image::community.png[alt='ASDF community plugin']
--

[.notes]
****
Permet l'installation d'un plugin pour gérer les versions d'un outil.

Plugin Shortname Index

https://asdf-vm.com/plugins/create.html#plugin-shortname-index
****

[.transparency]
=== .tool-versions

image::devoxx/DevoxxFR2024_0058.jpg[background, size=cover]


[source,shell]
----
$ cat .tool-versions
nodejs 14.21.3
----

[.notes]
****
- Définit les versions souhaitées d'un ou plusieurs outil(s).
- On peut/doit commit ce fichier au même titre que le gitignore
****

[.transparency]
=== Installation d'une version

image::devoxx/DevoxxFR2024_0035.jpg[background, size=cover]

[source,shell]
----
asdf install <plugin> <version>
asdf install nodejs 14.21.3
asdf install
----

=== Local vs Global

// image::devoxx/DevoxxFR2024_0048.jpg[background, size=cover]

[source,text]
----
~/
├── slides/
│   ├── assets/
│   │   ├── code/
│   │   │   ├── node14/
│   │   │   │   └── .tool-versions
│   │   │   └── node21/
│   │   │       └── .tool-versions
├── .tool-versions
----

[source,bash]
----
$ asdf global <outil> <version>
$ asdf local <outil> version>
----

=== Shims

[source,bash]
----
$ ls ~/.asdf/shims/
node                      npm                       npx

$ cat ~/.asdf/shims/node
#!/usr/bin/env bash
exec /home/s.metayer/.asdf/bin/asdf exec "node" "$@"

$ ls ~/.asdf/installs/nodejs/21.7.1/bin -al
node
npm -> ../lib/node_modules/npm/bin/npm-cli.js
npx -> ../lib/node_modules/npm/bin/npx-cli.js
----

[.notes]
****
Le dossier ~/.asdf/shims contient les binaires des versions actuelles.
Ces scripts sont des wrappers qui permettent de déterminer dynamiquement (selon le dossier ~/.tool-versions...) la version à utiliser.
Ensuite, le binaire est appelé depuis le dossier ~/.asdf/install/<tool>/<version>/bin/<bin>
****

[.transparency]
=== Mise à jour d'asdf

image::devoxx/DevoxxFR2024_0030.jpg[background, size=cover]

[source,bash]
----
asdf update
----

[.notes]
****
- Met à jour vers la dernière version stable d'asdf (dernière version tag)
- Permet d'avoir accès au bugfix / nouvelles fonctionnalités /...
****
